{"title":"kof97逆向","uid":"6f87183d1eab90b4f00ad401576c1de7","slug":"kof97逆向","date":"2021-02-17T12:24:13.000Z","updated":"2022-08-22T08:54:49.524Z","comments":true,"path":"api/articles/kof97逆向.json","keywords":null,"cover":"http://browser9.qhimg.com/bdm/960_593_0/t019f442db069339645.jpg","content":"<h1 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h1><p>Hack rom</p>\n<p>教程<br><a href=\"https://cloud.tencent.com/developer/article/1176843\">https://cloud.tencent.com/developer/article/1176843</a><br>kof97<br><a href=\"http://www.winkawaks.org/roms/neogeo/index.htm\">http://www.winkawaks.org/roms/neogeo/index.htm</a></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/%E9%94%AE%E4%BD%8D.PNG\" alt=\"键位\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210503213704207.png\" alt=\"image-20210503213704207\"></p>\n<p>F5存档<br>F7读档</p>\n<p>neogeo:debug dipswitches</p>\n<p>Tool：</p>\n<p>shot factory： 截图</p>\n<p>tile viewer:ctrl T   图片基元</p>\n<p>68000 debugger–&gt;…</p>\n<h2 id=\"mame\"><a href=\"#mame\" class=\"headerlink\" title=\"mame\"></a>mame</h2><p>mame使用教学</p>\n<p><a href=\"http://www.962.net/gl/6245_all.html\">http://www.962.net/gl/6245_all.html</a></p>\n<p>tab</p>\n<p>其他控制 coin：5678     </p>\n<p>存档读档：shift+F7,Z &#x2F; F7,Z                   &#x2F;sta</p>\n<p>P暂停</p>\n<p><a href=\"https://wiki.neogeodev.org/index.php?title=Main_Page\">https://wiki.neogeodev.org/index.php?title=Main_Page</a></p>\n<p>Base &#x2F;video sys</p>\n<p>NGH numbers: 232</p>\n<p>MVS  arcade</p>\n<p>AES  console</p>\n<p>模拟器开源代码：FBAlpha</p>\n<p>d_neogeo.cpp</p>\n<p>232-p1 主程序逻辑代码code！！！！！！！汇编</p>\n<p>p2 贴图index 血量 …DB     新手改！</p>\n<p>图像资源文件：</p>\n<p>s1 Text layer tiles 8*8</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504110052475.png\" alt=\"image-20210504110052475\"></p>\n<p>c1-6 Sprite data  16*16</p>\n<p>M1：Z80协处理器 音频</p>\n<p>v1-3:wav文件</p>\n<p>换贴图：裸体版。。。</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504114041613.png\" alt=\"image-20210504114041613\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>save test97.bin 0, 100000</p>\n<p>小端了</p>\n<p>给IDA pro</p></blockquote>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504154826959.png\" alt=\"image-20210504154826959\"></p>\n<p>; :</p>\n<p>n x</p>\n<p>d t</p>\n<p>g 9c54</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504155238698.png\" alt=\"image-20210504155238698\"></p>\n<h1 id=\"2-M68000汇编基础\"><a href=\"#2-M68000汇编基础\" class=\"headerlink\" title=\"2 M68000汇编基础\"></a>2 M68000汇编基础</h1><p>Tab:  universe bios 2.2</p>\n<img src=\"http://cache.itzy8.top/kof97逆向/image-20210504180149084.png\" alt=\"image-20210504180149084\" style=\"zoom:150%;\" />\n\n<p>–&gt;</p>\n<p>BRA: short jmp</p>\n<p>JMP</p>\n<p>BSR: short call</p>\n<p>JSR</p>\n<p>IDA 看</p>\n<p>Debug中：</p>\n<p>bp 9ede</p>\n<p>jsr改为bsr(等效)【ROM write word】: ow@9ede&#x3D;6100</p>\n<p>disassembly窗口：bsr！！！</p>\n<p>重新断</p>\n<p>还原：ow@9ede&#x3D;4eba</p>\n<p>《68000汇编语言程序设计》</p>\n<p>68K指令集 临时速查<a href=\"https://wenku.baidu.com/view/ec0325ea4afe04a1b071de53.html\">https://wenku.baidu.com/view/ec0325ea4afe04a1b071de53.html</a></p>\n<p>F11单步</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504184941775.png\" alt=\"image-20210504184941775\"></p>\n<p>dbf: bp 611c</p>\n<p>​         dbra(loop): D1-1,jmp to $6106</p>\n<p>sr： flags S&#x3D;1 特权级 </p>\n<p>ccr：flags 后8bit 非特权级</p>\n<p>​        bp 9eb0 </p>\n<p>​         ori：or imm</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504184548273.png\" alt=\"image-20210504184548273\"></p>\n<p>关中断  IntVBlank垂直同步Interrupt 、 timer…  、重启….</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504184759237.png\" alt=\"image-20210504184759237\"></p>\n<p>rte 自动回复flags</p>\n<p>sp</p>\n<p>bp 9eb4</p>\n<p>A7:sys堆栈  sp 压栈push</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504185346106.png\" alt=\"image-20210504185346106\"></p>\n<p>用reg传参，静态global var传参</p>\n<p>堆栈小（win console：4k  gui：64k）</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504185932040.png\" alt=\"image-20210504185932040\"></p>\n<h2 id=\"mame调试技巧\"><a href=\"#mame调试技巧\" class=\"headerlink\" title=\"mame调试技巧\"></a>mame调试技巧</h2><p>硬补丁：bne–&gt;nop  4e71</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504190330367.png\" alt=\"image-20210504190330367\"></p>\n<p>不会执行 中间…</p>\n<p>Hard reset:改坏了，硬重启  恢复bne</p>\n<p>！！！软补丁：F7不影响了！！！</p>\n<p>条件断点，g 让程序继续跑</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504190950889.png\" alt=\"image-20210504190950889\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504191027640.png\" alt=\"image-20210504191027640\"></p>\n<p>bpclear</p>\n<p>等价：</p>\n<img src=\"http://cache.itzy8.top/kof97逆向/image-20210504191201386.png\" alt=\"image-20210504191201386\" style=\"zoom:150%;\" />\n\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504191357145.png\" alt=\"image-20210504191357145\"></p>\n<p>脚本语言，类似C语言，并不短路！！！</p>\n<h1 id=\"3-kof97内存地址映射\"><a href=\"#3-kof97内存地址映射\" class=\"headerlink\" title=\"3.kof97内存地址映射\"></a>3.kof97内存地址映射</h1><p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504191541981.png\" alt=\"image-20210504191541981\"></p>\n<p>通常“内存”：RAM</p>\n<p>memory: CPU寻址空间</p>\n<p><a href=\"https://wiki.neogeodev.org/index.php?title=68k_memory_map\">https://wiki.neogeodev.org/index.php?title=68k_memory_map</a></p>\n<p>ROM</p>\n<p>RAM 可写</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504203713252.png\" alt=\"image-20210504203713252\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504203943862.png\" alt=\"image-20210504203943862\"></p>\n<p>镜像：指向同一块内存</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504204025373.png\" alt=\"image-20210504204025373\"></p>\n<p>硬件 空间小 64k</p>\n<p>108200-&gt;只看8200</p>\n<p> p2-rom: 4M-&gt;1M  用bankswitch内存切页！</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504205035775.png\" alt=\"image-20210504205035775\"></p>\n<p>sys rom：bios    coin~</p>\n<p>1 RAM</p>\n<p>2 P2ROM</p>\n<p>3 IO</p>\n<p>4~7 palette</p>\n<p>C BIOS</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504205325199.png\" alt=\"image-20210504205325199\"></p>\n<p>bios ： 与IDA kof97p1 无关</p>\n<p>3: IO reg</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504205722673.png\" alt=\"image-20210504205722673\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504205803134.png\" alt=\"image-20210504205803134\"></p>\n<p>主板出错报告，正常到不了</p>\n<p>直接PC改为AEC0：</p>\n<p>a7:sys堆栈  （改PC 0AEC0）</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504210002549.png\" alt=\"image-20210504210002549\"></p>\n<p>3c0000: 还是0，没变</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504210303990.png\" alt=\"image-20210504210303990\"></p>\n<p>操作显存，类似操作硬盘  addr 、content 、 step自增1</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504210726201.png\" alt=\"image-20210504210726201\"></p>\n<p>video sys-vram显存</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504210614145.png\" alt=\"image-20210504210614145\"></p>\n<h2 id=\"实验1\"><a href=\"#实验1\" class=\"headerlink\" title=\"实验1\"></a>实验1</h2><p>20实际是10，改为1234</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504211518066.png\" alt=\"image-20210504211518066\"></p>\n<p>显存的W与R出的不同，一般只关注W</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504211720105.png\" alt=\"image-20210504211720105\"></p>\n<h2 id=\"实验2\"><a href=\"#实验2\" class=\"headerlink\" title=\"实验2\"></a>实验2</h2><p>move.l: long 4B</p>\n<p>3c0000端口 word类型2B   reg不够大</p>\n<p>16bit CPU，转换为2 steps</p>\n<p>同上等效！ 向显存10处写1234</p>\n<p>设地址+写内容 一步实现</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504212121217.png\" alt=\"image-20210504212121217\"></p>\n<h2 id=\"Bankswitch\"><a href=\"#Bankswitch\" class=\"headerlink\" title=\"Bankswitch\"></a>Bankswitch</h2><p>F7 z</p>\n<p>P2ROM 4M ：winhex打开</p>\n<p>ida 搜switch</p>\n<img src=\"http://cache.itzy8.top/kof97逆向/image-20210504213103320.png\" alt=\"image-20210504213103320\" style=\"zoom:150%;\" />\n\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504213355300.png\" alt=\"image-20210504213355300\"></p>\n<p>P2ROM 不能W，没写1</p>\n<p>切页了！！！</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504213513288.png\" alt=\"image-20210504213513288\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210504213904026.png\" alt=\"image-20210504213904026\"></p>\n<p>winhex：切页index 00 01 02 03</p>\n<p>不同硬件做切页：CPU不停读切页index，不等就切页失败，spining自旋忙等</p>\n<h1 id=\"4-主循环\"><a href=\"#4-主循环\" class=\"headerlink\" title=\"4. 主循环\"></a>4. 主循环</h1><p>帧动画  显卡扫描60frames&#x2F;s   CRT显像管<br><strong>主循环地址：入口 9C38  ,  start 9C44</strong></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506095027123.png\" alt=\"image-20210506095027123\"></p>\n<p>CPU计算慢，重绘：卡顿 </p>\n<p>如今：CPU-&gt;GPU,掉帧</p>\n<p>F10  死循环</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506100029543.png\" alt=\"image-20210506100029543\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506095818633.png\" alt=\"image-20210506095818633\"></p>\n<p>step4 等待VBlank中断信号</p>\n<p>bp 9EA2</p>\n<p>F5</p>\n<p>shift F11</p>\n<p>F10…</p>\n<p>9C5C: step 1    读keyboard</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506100304324.png\" alt=\"image-20210506100304324\"></p>\n<p>9CDC: step2</p>\n<p>…</p>\n<p>9D88 end</p>\n<h2 id=\"ROM文件头格式\"><a href=\"#ROM文件头格式\" class=\"headerlink\" title=\"ROM文件头格式\"></a>ROM文件头格式</h2><p><a href=\"https://wiki.neogeodev.org/index.php?title=68k_program_header\">https://wiki.neogeodev.org/index.php?title=68k_program_header</a></p>\n<p>PE ELF</p>\n<p>0:中断向量表 （实模式 加电 0-0x100）</p>\n<p>查68k vector table:</p>\n<p>C…:BIOS</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506101238197.png\" alt=\"image-20210506101238197\"></p>\n<p>5  除0   RTE：不处理，直接返回</p>\n<p>A7 initialSP: 10F300</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506101607525.png\" alt=\"image-20210506101607525\"></p>\n<p>68k interrupt：</p>\n<p>IntTimer</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506101734194.png\" alt=\"image-20210506101734194\"></p>\n<p>IO reg设置中断频率</p>\n<p>通知reg已处理，acknowledgement，防止不停中断</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506101957238.png\" alt=\"image-20210506101957238\"></p>\n<p>IntVBlankRoutine:  bp 9EA2</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506103149224.png\" alt=\"image-20210506103149224\"></p>\n<p><a href=\"https://wiki.neogeodev.org/index.php?title=68k_program_header\">https://wiki.neogeodev.org/index.php?title=68k_program_header</a></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506103449486.png\" alt=\"image-20210506103449486\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506103339354.png\" alt=\"image-20210506103339354\"></p>\n<p>100000调试开关</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506103533574.png\" alt=\"image-20210506103533574\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506103703800.png\" alt=\"image-20210506103703800\"></p>\n<p>F2界面字符串：欧美日</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506103731304.png\" alt=\"image-20210506103731304\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506104118338.png\" alt=\"image-20210506104118338\"></p>\n<p>OEP：BIOS交控制权</p>\n<p>coin后选人</p>\n<p>过场动画</p>\n<p>声音处理</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506104144485.png\" alt=\"image-20210506104144485\"></p>\n<p>122–&gt;9868</p>\n<p>查BIOS_RAM_Locations  10FD80</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506104538533.png\" alt=\"image-20210506104538533\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506104517738.png\" alt=\"image-20210506104517738\"></p>\n<h2 id=\"RAM布局\"><a href=\"#RAM布局\" class=\"headerlink\" title=\"RAM布局\"></a>RAM布局</h2><p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506105530793.png\" alt=\"image-20210506105530793\"></p>\n<p>10F300：initialSP</p>\n<p>stk增长不快</p>\n<p>100000：debugdip</p>\n<p>100098：帧数计数器</p>\n<p>Pool：堆 动态内存  data表示意义在变化（发2个波 addr不同）生命周期结束就销毁了</p>\n<p>static RAM：1P横坐标[常用]</p>\n<p>地址访问不直接用立即数</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506105845063.png\" alt=\"image-20210506105845063\"></p>\n<p>A5+offset</p>\n<p><a href=\"https://wiki.neogeodev.org/index.php?title=68k_instructions_timings\">https://wiki.neogeodev.org/index.php?title=68k_instructions_timings</a></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506110215605.png\" alt=\"image-20210506110215605\"></p>\n<p>因为imm慢，timing长</p>\n<p><strong>A5&#x3D;108000不变，RAM Base基址</strong></p>\n<p><strong>A4指向Object</strong></p>\n<h1 id=\"5-图像显示（上）\"><a href=\"#5-图像显示（上）\" class=\"headerlink\" title=\"5.图像显示（上）\"></a>5.图像显示（上）</h1><p><a href=\"https://wiki.neogeodev.org/index.php?title=Category:Video_system\">https://wiki.neogeodev.org/index.php?title=Category:Video_system</a></p>\n<p>ctrl F</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506111035311.png\" alt=\"image-20210506111035311\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506111145350.png\" alt=\"image-20210506111145350\"></p>\n<p>8*8 tile：血条，时间，文字     </p>\n<p>kof97.zip图像资源文件：</p>\n<p>s1 Text layer tiles 8*8</p>\n<h2 id=\"fix-layer：-图层置顶-fixed-position\"><a href=\"#fix-layer：-图层置顶-fixed-position\" class=\"headerlink\" title=\"fix layer： 图层置顶 fixed position\"></a>fix layer： 图层置顶 fixed position</h2><p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506111604168.png\" alt=\"image-20210506111604168\"></p>\n<p>Ctrl T：tile viewer</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506111659700.png\" alt=\"image-20210506111659700\"></p>\n<p>用kawaks</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506112003419.png\" alt=\"image-20210506112003419\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506112120689.png\" alt=\"image-20210506112120689\"></p>\n<p>留黑边防止露馅</p>\n<p>按列遍历“K”在70A5</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506112446019.png\" alt=\"image-20210506112446019\"></p>\n<p>改为6A 6B，变！！！</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506112714800.png\" alt=\"image-20210506112714800\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506112727935.png\" alt=\"image-20210506112727935\"></p>\n<p>0x2 36B–&gt;10进制：875</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506112951123.png\" alt=\"image-20210506112951123\"></p>\n<p>2-&gt;3有偏差</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506113039234.png\" alt=\"image-20210506113039234\"></p>\n<p>741B</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506113327468.png\" alt=\"image-20210506113327468\"></p>\n<p>c1-6 Sprite data  16*16</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506113522892.png\" alt=\"image-20210506113522892\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506114454079.png\" alt=\"image-20210506114454079\"></p>\n<h2 id=\"Sprites-一条\"><a href=\"#Sprites-一条\" class=\"headerlink\" title=\"Sprites 一条\"></a>Sprites 一条</h2><p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506114717318.png\" alt=\"image-20210506114717318\"></p>\n<p>上下两层移动速度不同，造成景深效果</p>\n<p>近景：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506114854171.png\" alt=\"image-20210506114854171\"></p>\n<p>2P影子： <strong>压扁</strong> ，palette变黑，垂直翻转</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506182234831.png\" alt=\"image-20210506182234831\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506115022246.png\" alt=\"image-20210506115022246\"></p>\n<p>Ctrl D</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506115412112.png\" alt=\"image-20210506115412112\"></p>\n<p>MVSVRAM.dmp</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506115435842.png\" alt=\"image-20210506115435842\"></p>\n<p>用CE！！！</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506115541916.png\" alt=\"image-20210506115541916\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506115613452.png\" alt=\"image-20210506115613452\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506115630994.png\" alt=\"image-20210506115630994\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506150748097.png\" alt=\"image-20210506150748097\"></p>\n<p>SCB1</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506151140676.png\" alt=\"image-20210506151140676\"></p>\n<p>SCB2: 0x8000*2-&gt;0x10000</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506151424751.png\" alt=\"image-20210506151424751\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506151509485.png\" alt=\"image-20210506151509485\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506151541080.png\" alt=\"image-20210506151541080\"></p>\n<p>save</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506151811326.png\" alt=\"image-20210506151811326\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506151835741.png\" alt=\"image-20210506151835741\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506151904812.png\" alt=\"image-20210506151904812\"></p>\n<p>SCB2:收缩因子 FF0F  0FFF  横纵 全1 不收缩</p>\n<p>草雉0C7 *2&#x3D;18E  word</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506152242322.png\" alt=\"image-20210506152242322\"></p>\n<p>影子可改0B4*2&#x3D;168   VH</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506152450815.png\" alt=\"image-20210506152450815\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506115339102.png\" alt=\"image-20210506115339102\"></p>\n<p>SCB4：H Pos</p>\n<p>草雉0C7 *2&#x3D;18E  word</p>\n<p>2P：0B4*2</p>\n<p>SCB3：V</p>\n<p>sprite size</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506153324714.png\" alt=\"image-20210506153324714\"></p>\n<p>sticky bit(group)&lt;–&gt;   1P&#x3D;&#x3D;多个sprite竖条</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506153519792.png\" alt=\"image-20210506153519792\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506153627362.png\" alt=\"image-20210506153627362\"></p>\n<p>SCB3:V</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506181721132.png\" alt=\"image-20210506181721132\"></p>\n<p>SCB4:H</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506181924566.png\" alt=\"image-20210506181924566\"></p>\n<p>addr靠后的tile会压住addr靠前的tile：2P压1P</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506182038286.png\" alt=\"image-20210506182038286\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506182103536.png\" alt=\"image-20210506182103536\"></p>\n<p>远 中 近bg 人物</p>\n<h1 id=\"6-图像显示（下）\"><a href=\"#6-图像显示（下）\" class=\"headerlink\" title=\"6.图像显示（下）\"></a>6.图像显示（下）</h1><p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506183708830.png\" alt=\"image-20210506183708830\"></p>\n<p>64-&gt;0x40 *2&#x3D;0x80 bytes</p>\n<p>idx:12</p>\n<p>hex 12*80&#x3D;900</p>\n<p>V012: 63c9 d100</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506183030546.png\" alt=\"image-20210506183030546\"></p>\n<p>LSB: 63c9&#x3D;10进制 25545</p>\n<p>palette: d1&#x3D;10进制 209 ，实际210</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506183419194.png\" alt=\"image-20210506183419194\"></p>\n<p>palette: d8&#x3D;10进制 232</p>\n<p>Hflip</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506183928475.png\" alt=\"image-20210506183928475\"></p>\n<p>Vflip（倒影！！！）</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506183843939.png\" alt=\"image-20210506183843939\"></p>\n<p>1P Hflip了</p>\n<p>idx0A9*80</p>\n<p>offset…</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506185007028.png\" alt=\"image-20210506185007028\"></p>\n<p><strong>5e48 b5</strong>08</p>\n<p>-&gt;24136 181</p>\n<p>tile viewer, paletteB5*2&#x3D;181</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506184728155.png\" alt=\"image-20210506184728155\"></p>\n<p>步进step frame</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210506184509593.png\" alt=\"image-20210506184509593\"></p>\n<p>切换速度: 8frames 切换一次画面</p>\n<p>gif 自动动画(bg: 省CPU)</p>\n<p>3bit: 8 tiles循环</p>\n<p>2bit：4 tiles循环</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507102028636.png\" alt=\"image-20210507102028636\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507102049728.png\" alt=\"image-20210507102049728\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507101554997.png\" alt=\"image-20210507101554997\"></p>\n<p>1word : sprite size置0，影子隐藏</p>\n<p>影跳</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507101818713.png\" alt=\"image-20210507101818713\"></p>\n<p>1P2P交替    sprite隔帧替换</p>\n<p>双帧隐藏</p>\n<p>VBlankRoutine中断处理例程  时间有限，追求效率！！！</p>\n<p>9F20: UpdateSCB3</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507102953553.png\" alt=\"image-20210507102953553\"></p>\n<p>64个</p>\n<p>9F24: UpdateSCB2           看a0</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507102317174.png\" alt=\"image-20210507102317174\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507102552484.png\" alt=\"image-20210507102552484\"></p>\n<p>32个</p>\n<p>高效：dbf loop 每次判0，慢</p>\n<p>4次就直接跳到箭头处</p>\n<img src=\"http://cache.itzy8.top/kof97逆向/image-20210507103211202.png\" alt=\"image-20210507103211202\" style=\"zoom: 200%;\" />\n\n\n\n<p>SCB1在外面更新，写入的区域看不到，size&#x3D;0,改好再显示</p>\n<p>人物SCB1：bp 6022 （写入不显示的SCB1）</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507104154104.png\" alt=\"image-20210507104154104\"></p>\n<p>d7：b4…-&gt;113   1p2p idx</p>\n<p>a6: tile num [lsb msb] 需要解析！</p>\n<p>11types压缩算法</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507104351853.png\" alt=\"image-20210507104351853\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507104749678.png\" alt=\"image-20210507104749678\"></p>\n<p>10 palette</p>\n<p>08 idx</p>\n<p>05W 07H</p>\n<p>tile num 连续； 透明就忽略掉，稀疏压缩</p>\n<h1 id=\"7-动态内存管理\"><a href=\"#7-动态内存管理\" class=\"headerlink\" title=\"7.动态内存管理\"></a>7.动态内存管理</h1><p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507112052355.png\" alt=\"image-20210507112052355\"></p>\n<p>0x200&#x3D;512B 为单位分配addr &#x2F; 释放，对齐</p>\n<p>发波，贴图（依赖人物，生命周期短）</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507112251313.png\" alt=\"image-20210507112251313\"></p>\n<p>双链表</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507112918109.png\" alt=\"image-20210507112918109\"></p>\n<p>按prio插入</p>\n<p>释放：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507113035683.png\" alt=\"image-20210507113035683\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507113432571.png\" alt=\"image-20210507113432571\"></p>\n<p>改r h仍正常，不重要</p>\n<p>next：0500  prev：-1</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507113749097.png\" alt=\"image-20210507113749097\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507114222853.png\" alt=\"image-20210507114222853\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507114203956.png\" alt=\"image-20210507114203956\"></p>\n<p>mem上:可用，下:不可用(垃圾data)</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507114639832.png\" alt=\"image-20210507114639832\"></p>\n<p>level越大，prio越弱，靠后</p>\n<p>前两字节304C：（飞行道具obj…）自带处理程序addr</p>\n<p>a4:obj</p>\n<p>P1ROM 30B2：分配0x200B动态内存</p>\n<p>a0:自带处理程序  d0:level</p>\n<img src=\"http://cache.itzy8.top/kof97逆向/image-20210507115448779.png\" alt=\"image-20210507115448779\" style=\"zoom:200%;\" />\n\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507115839694.png\" alt=\"image-20210507115839694\"></p>\n<p>分配、释放obj处bp，打印链表指针</p>\n<p>连招卡顿，挨个执行处理程序</p>\n<h2 id=\"经典实验\"><a href=\"#经典实验\" class=\"headerlink\" title=\"经典实验\"></a>经典实验</h2><p>1：指针上提！！！，造成内存分配失败“task over!!”</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507120625371.png\" alt=\"image-20210507120625371\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507120333936.png\" alt=\"image-20210507120333936\"></p>\n<p>分配失败：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507120451316.png\" alt=\"image-20210507120451316\"></p>\n<p>palette, tile vram addr</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507120429108.png\" alt=\"image-20210507120429108\"></p>\n<ol start=\"2\">\n<li></li>\n</ol>\n<p>1P2P放在static RAM: 108100【200B】~108300【200B】</p>\n<p>处理例程：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507121239349.png\" alt=\"image-20210507121239349\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507121355006.png\" alt=\"image-20210507121355006\"></p>\n<p>动作一变，处理例程就变了</p>\n<p>8层bg：</p>\n<p>10b0b2[100B]：bg</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507121447022.png\" alt=\"image-20210507121447022\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507121505972.png\" alt=\"image-20210507121505972\"></p>\n<p>。。。</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507121529658.png\" alt=\"image-20210507121529658\"></p>\n<p>bg obj 处理：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507121640395.png\" alt=\"image-20210507121640395\"></p>\n<p>人物影子10e4d6</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507121836813.png\" alt=\"image-20210507121836813\"></p>\n<p>3层影跳 0x40&#x3D;64B</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507121928247.png\" alt=\"image-20210507121928247\"></p>\n<p>备份队列，H V tile_idx palette</p>\n<p>类的继承：400 、200 、64</p>\n<ol start=\"3\">\n<li></li>\n</ol>\n<p>CH：70 ACT：72 查人物&#x2F;贴图</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507122941890.png\" alt=\"image-20210507122941890\"></p>\n<p>obj（offset70）人物CH code：1B   （72）动作ACT code：9B</p>\n<p>debug模式:</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507123200261.png\" alt=\"image-20210507123200261\"></p>\n<p>家用机：按住(按两次？)coin &#x2F; pause，移动    攻击：调整CH 、ACT code</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507123335882.png\" alt=\"image-20210507123335882\"></p>\n<h1 id=\"8-ACT封装\"><a href=\"#8-ACT封装\" class=\"headerlink\" title=\"8.ACT封装\"></a>8.ACT封装</h1><p>BIOS:unibios</p>\n<p>keyboard:  qwer  coin:5–&gt;CH  ACT</p>\n<p>F7 z</p>\n<p>【图片待修复。。。】</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">![image-20210507163044497](C:\\Users\\bxl\\Desktop\\image-20210507163044497.png)</code></pre>\n\n\n\n<p>108170</p>\n<p>落地 声效</p>\n<p>P2rom：4个bank 的    bank12里</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507164032719.png\" alt=\"image-20210507164032719\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507164041968.png\" alt=\"image-20210507164041968\"></p>\n<p>Graph Info Entry：</p>\n<p>H V  人物静态图idx</p>\n<p>100000处 改为0200: anchor 十字</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507164824804.png\" alt=\"image-20210507164824804\"></p>\n<p>FF负值-&gt;W为0</p>\n<p>只是右闪了一下：因为站立本身就是一套ACT，现只右移了一张贴图</p>\n<p>一个人物：menu-&gt;submenu1-&gt;entry1</p>\n<p>​                   250000-2536c6-250092</p>\n<p>Graph Data Entry：</p>\n<p>10种压缩方法&#x2F;解析方法</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507165827988.png\" alt=\"image-20210507165827988\"></p>\n<p>type2：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507170118189.png\" alt=\"image-20210507170118189\"></p>\n<p>10：16  10000：65536</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507170730960.png\" alt=\"image-20210507170730960\"></p>\n<p>1才写入rom</p>\n<p>比8高就16bit位图。。。</p>\n<p>人物设计  美工tile  压缩—&gt;P2rom</p>\n<p>Bank2：ACT</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507171357931.png\" alt=\"image-20210507171357931\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507171532065.png\" alt=\"image-20210507171532065\"></p>\n<p>站立ACT：21191a</p>\n<p>code addr：P1rom  584C</p>\n<p>6bit一组</p>\n<p>FF：ACT循环</p>\n<p>FE：ACT中断</p>\n<p>FD：站立</p>\n<p>4 frames &#x2F; tile</p>\n<p>判定框：type | box idx 绿黄蓝。。。</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507172444427.png\" alt=\"image-20210507172444427\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507172641051.png\" alt=\"image-20210507172641051\"></p>\n<p>04A4：W为0000    头判定框相对十字偏移  “头的判定落到了脚的位置~”</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507172815064.png\" alt=\"image-20210507172815064\"></p>\n<p>WH：框的大小  控制(被)打击范围</p>\n<p>next：黄框    FD 0A：000010 10</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507173746075.png\" alt=\"image-20210507173746075\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507173809287.png\" alt=\"image-20210507173809287\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507174119300.png\" alt=\"image-20210507174119300\"></p>\n<p>04D4142C</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507172641051.png\" alt=\"image-20210507172641051\"></p>\n<p>04是否硬直…flag</p>\n<p>06哪些判定框有效</p>\n<p>graph idx: bank1…拿到tile</p>\n<p>FB：鬼烧2段 1段</p>\n<p>200002:  20011a</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507174837450.png\" alt=\"image-20210507174837450\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507175018388.png\" alt=\"image-20210507175018388\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507175236895.png\" alt=\"image-20210507175236895\"></p>\n<p>FB：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507175505435.png\" alt=\"image-20210507175505435\"></p>\n<p>水平负偏移FFF8–&gt;ff80</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507175345397.png\" alt=\"image-20210507175345397\"></p>\n<p>鬼烧偏移加大，直接冲到右边！！！</p>\n<p>鬼烧起势：【tile H偏移  判定框s 。。。】*n</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507175236895.png\" alt=\"image-20210507175236895\"></p>\n<p>（72）动作ACT code：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507175956087.png\" alt=\"image-20210507175956087\"></p>\n<p>发动作：显示9c</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507180034742.png\" alt=\"image-20210507180034742\"></p>\n<p>FC：音效  02C5(idx)–&gt;02c6</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507180248060.png\" alt=\"image-20210507180248060\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507180258736.png\" alt=\"image-20210507180258736\"></p>\n<p>FA:附加特效 45：idx  W Hoffset</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507180512050.png\" alt=\"image-20210507180512050\"></p>\n<p>256个常用的特效在出招ACT里</p>\n<p>其它在[出招判定]流程里</p>\n<p>鬼烧起势81实验：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507181224941.png\" alt=\"image-20210507181224941\"></p>\n<p>持续2frames  tile_idx:E1</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507181312714.png\" alt=\"image-20210507181312714\"></p>\n<p>bp  到Bank1：？？？</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507181447278.png\" alt=\"image-20210507181447278\"></p>\n<p>250000-&gt;2536c6 [+ e1*4]: 25100c</p>\n<p>palette  解析type  Width、H  <strong>idx：11139</strong>  8bit位图</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507181833064.png\" alt=\"image-20210507181833064\"></p>\n<p>11139&#x3D;&#x3D;10进制69945</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507181934415.png\" alt=\"image-20210507181934415\"></p>\n<p>位图10…</p>\n<p>IDA逆向 6022处: UpdateSCB1。。。</p>\n<p>​               584C: ACT 6bit组 GetNextMov。。。</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507182250716.png\" alt=\"image-20210507182250716\"></p>\n<h1 id=\"9-指令输入系统-出招表\"><a href=\"#9-指令输入系统-出招表\" class=\"headerlink\" title=\"9.指令输入系统+出招表\"></a>9.指令输入系统+出招表</h1><p><a href=\"https://wiki.neogeodev.org/index.php?title=Memory_mapped_registers\">https://wiki.neogeodev.org/index.php?title=Memory_mapped_registers</a></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507193309888.png\" alt=\"image-20210507193309888\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507193251297.png\" alt=\"image-20210507193251297\"></p>\n<p>松开是1，   按跳FF变FE</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507200121270.png\" alt=\"image-20210507200121270\"></p>\n<p>下 FD, L   FB, R  F7, 轻拳EF, DF  BF 7F</p>\n<p>主循环里：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507200439389.png\" alt=\"image-20210507200439389\"></p>\n<p>封装为按下&#x2F;松开事件</p>\n<p>公司开发多个游戏：keyboard处理做成通用接口</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507200728245.png\" alt=\"image-20210507200728245\"></p>\n<p>P1: 108000+5A48:静态地址<strong>10da44</strong></p>\n<p>把300000处取反：上下左右01020408   攻击10204080</p>\n<p>2帧取与：TAS逐帧操作</p>\n<p>1P控制：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507201450028.png\" alt=\"image-20210507201450028\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507201640904.png\" alt=\"image-20210507201640904\"></p>\n<p>1^0&#x3D;1</p>\n<p>为稳定性考虑！  1&#x2F;30s</p>\n<p>小键盘 升龙626 424 2626 2624 </p>\n<p>输入缓冲区60B  60帧&#x2F;s</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507204856608.png\" alt=\"image-20210507204856608\"></p>\n<p>移动内存：复制平移【不一定合理，其实可以用指针】</p>\n<p>连跳两下&#x3D;高跳pause_step over： 101在缓冲区中向前滚动</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507202226212.png\" alt=\"image-20210507202226212\"></p>\n<p>IDA 12914  UpdateACTInputQueue</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507203237575.png\" alt=\"image-20210507203237575\"></p>\n<p>bp 12914</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507202537254.png\" alt=\"image-20210507202537254\"></p>\n<p>方向键持续时间：用于蓄力的招！</p>\n<p>a0:输入检查表 [ 所有出招 ] ,一个指针数组 </p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507203450408.png\" alt=\"image-20210507203450408\"></p>\n<p>L: 66跑 44后跳 28影跳 626X升龙… 424 624 236 214 2426X大蛇薙 26236X</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507204056813.png\" alt=\"image-20210507204056813\"></p>\n<p>W1run W4后跳</p>\n<p>系统检查是否出招，出招否</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507204231391.png\" alt=\"image-20210507204231391\"></p>\n<p>A8改AC：升龙626</p>\n<p>X方向键  记录之前动作</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507204830693.png\" alt=\"image-20210507204830693\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507204916423.png\" alt=\"image-20210507204916423\"></p>\n<p>更新后检查招式时改成040004：bp 129ac</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507205401705.png\" alt=\"image-20210507205401705\"></p>\n<p>max span frames:8帧内有4….0…**4[保证在队列尾！最新！]**即可</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507205835298.png\" alt=\"image-20210507205835298\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507205945585.png\" alt=\"image-20210507205945585\"></p>\n<p>0 0蓄力时间, 改小更容易</p>\n<p>F5 升龙</p>\n<p>比较方式：严格404，压了其他键 就发不出招来了 ：有轻拳无后跳</p>\n<p>蓄力 复合指令：  允许与X复合</p>\n<p>$14     </p>\n<p>$28</p>\n<p>$F0</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507211018155.png\" alt=\"image-20210507211018155\"></p>\n<p>11种判定方法。。。</p>\n<p>分析出招表：可比较 2人谁出招快，距离远…</p>\n<h1 id=\"10-碰撞检测\"><a href=\"#10-碰撞检测\" class=\"headerlink\" title=\"10.碰撞检测\"></a>10.碰撞检测</h1><p><strong>搜：KOF97判定框查看方法及判定框颜色定义全解析！！</strong></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507212024091.png\" alt=\"image-20210507212024091\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507212209456.png\" alt=\"image-20210507212209456\"></p>\n<p>判定框size&#x3D;0的结果。。。</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507212153689.png\" alt=\"image-20210507212153689\"></p>\n<p>10000  不是0…</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507212403778.png\" alt=\"image-20210507212403778\"></p>\n<p>P2rom</p>\n<p>IDA 3698:</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507212609632.png\" alt=\"image-20210507212609632\"></p>\n<p>x</p>\n<p>主循环…9E04  软补丁nop跳过 6B</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507212727154.png\" alt=\"image-20210507212727154\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507212835543.png\" alt=\"image-20210507212835543\"></p>\n<p>不会碰撞检测了</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507212925447.png\" alt=\"image-20210507212925447\"></p>\n<p>成ACT动画播放器了</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507213108147.png\" alt=\"image-20210507213108147\"></p>\n<p>都nop，就能穿人了</p>\n<p>enter:</p>\n<img src=\"http://cache.itzy8.top/kof97逆向/image-20210507213237119.png\" alt=\"image-20210507213237119\" style=\"zoom:200%;\" />\n\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507213923605.png\" alt=\"image-20210507213923605\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507213938438.png\" alt=\"image-20210507213938438\"></p>\n<p>97：1P面向不转向原则</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507214118813.png\" alt=\"image-20210507214118813\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507214135750.png\" alt=\"image-20210507214135750\"></p>\n<p>98：2P强制转身</p>\n<p>3698 (被)攻击</p>\n<img src=\"http://cache.itzy8.top/kof97逆向/image-20210507214232486.png\" alt=\"image-20210507214232486\" style=\"zoom:200%;\" />\n\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507214516771.png\" alt=\"image-20210507214516771\"></p>\n<p>64种box type</p>\n<p>被攻击判定：</p>\n<img src=\"http://cache.itzy8.top/kof97逆向/image-20210507215131754.png\" alt=\"image-20210507215131754\" style=\"zoom:200%;\" />\n\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221942173.png\" alt=\"image-20210507221942173\"></p>\n<p>05红框</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507215518759.png\" alt=\"image-20210507215518759\"></p>\n<p>爆气 counter  56：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507215554937.png\" alt=\"image-20210507215554937\"></p>\n<p>c~17不磨血攻击判定：</p>\n<p>18~… 必杀技</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507220100251.png\" alt=\"image-20210507220100251\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507220650699.png\" alt=\"image-20210507220650699\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507220742294.png\" alt=\"image-20210507220742294\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507220116069.png\" alt=\"image-20210507220116069\"></p>\n<p>玛丽38   龙二3839</p>\n<p>飞行道具：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221021714.png\" alt=\"image-20210507221021714\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221033885.png\" alt=\"image-20210507221033885\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221130346.png\" alt=\"image-20210507221130346\"></p>\n<p>3112</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221219355.png\" alt=\"image-20210507221219355\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221304360.png\" alt=\"image-20210507221304360\"></p>\n<p>CH：1B  ACT：9B</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221418504.png\" alt=\"image-20210507221418504\"></p>\n<p>19紫 3A橙：飞行道具抵消判定框</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221544441.png\" alt=\"image-20210507221544441\"></p>\n<p>3d</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221625749.png\" alt=\"image-20210507221625749\"></p>\n<p>3C</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221647326.png\" alt=\"image-20210507221647326\"></p>\n<p>3b  互穿</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221756618.png\" alt=\"image-20210507221756618\"></p>\n<p>3f</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507221857975.png\" alt=\"image-20210507221857975\"></p>\n<p>不靠判定框判定受0E攻击：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507222259109.png\" alt=\"image-20210507222259109\"></p>\n<p>07禁止对空追打：改？？？ 可无限连招</p>\n<p>8：倒地追打</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507222717484.png\" alt=\"image-20210507222717484\"></p>\n<h1 id=\"11-碰撞处理和连招\"><a href=\"#11-碰撞处理和连招\" class=\"headerlink\" title=\"11.碰撞处理和连招\"></a>11.碰撞处理和连招</h1><p>蹲防不能防跳起的ABCD。。。跳防不能防必杀技。。。</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507224249931.png\" alt=\"image-20210507224249931\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507224520634.png\" alt=\"image-20210507224520634\"></p>\n<p>nop掉3794：每一帧后重复攻击判定</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507224634675.png\" alt=\"image-20210507224634675\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507224729269.png\" alt=\"image-20210507224729269\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507224902430.png\" alt=\"image-20210507224902430\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507224925815.png\" alt=\"image-20210507224925815\"></p>\n<p>碰撞检测返回处38be：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507225218699.png\" alt=\"image-20210507225218699\"></p>\n<p>同人互相counter（同受）攻击：  4B</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507225330705.png\" alt=\"image-20210507225330705\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507225640071.png\" alt=\"image-20210507225640071\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507225545598.png\" alt=\"image-20210507225545598\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507225743245.png\" alt=\"image-20210507225743245\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507225914345.png\" alt=\"image-20210507225914345\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507225933522.png\" alt=\"image-20210507225933522\"></p>\n<h2 id=\"连续技\"><a href=\"#连续技\" class=\"headerlink\" title=\"连续技\"></a>连续技</h2><p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507230112000.png\" alt=\"image-20210507230112000\"></p>\n<p>目押需要C时机，cancel只要够快就行（输入缓冲队列里有）</p>\n<p> mark位接受cancel</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508095334922.png\" alt=\"image-20210508095334922\"></p>\n<p>挥空cancel</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210507222259109.png\" alt=\"image-20210507222259109\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508100241543.png\" alt=\"image-20210508100241543\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508100324286.png\" alt=\"image-20210508100324286\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>bp 1e5f4   断cancel</p></blockquote>\n<p>葵花三段：108172 ：008D 末尾做按键test【半主动状态】</p>\n<p>ACT：6B</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508100922465.png\" alt=\"image-20210508100922465\"></p>\n<p>200002 CH table</p>\n<p>八神CH：108170</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508101054468.png\" alt=\"image-20210508101054468\"></p>\n<p>ACT menu：20d91a</p>\n<p>IDA 584C  5A3E:GetMovOffset</p>\n<p>ACT 经解析：</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508101433936.png\" alt=\"image-20210508101433936\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508101447569.png\" alt=\"image-20210508101447569\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508101525426.png\" alt=\"image-20210508101525426\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508101555206.png\" alt=\"image-20210508101555206\"></p>\n<p>ACT：2876f8</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508101702969.png\" alt=\"image-20210508101702969\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508102047311.png\" alt=\"image-20210508102047311\"></p>\n<p>IDA58E0</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508102155729.png\" alt=\"image-20210508102155729\"></p>\n<p>0500-&gt;W为0520：持续5帧  火焰特效     高4位特效</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508102822468.png\" alt=\"image-20210508102822468\"></p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508103231054.png\" alt=\"image-20210508103231054\"></p>\n<p>0700-&gt;W为070c:       改cancel可连招！！！！！！！！</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508102629099.png\" alt=\"image-20210508102629099\"></p>\n<p>[超]必杀（最高级）没有cancel位</p>\n<p>硬直：打中人停3帧</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508103401678.png\" alt=\"image-20210508103401678\"></p>\n<p>70硬直：屏幕震动效果    打击感！！！</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508103539665.png\" alt=\"image-20210508103539665\"></p>\n<p>IDA 1633E。。。</p>\n<p><img src=\"http://cache.itzy8.top/kof97%E9%80%86%E5%90%91/image-20210508103813243.png\" alt=\"image-20210508103813243\"></p>\n<p>task over</p>\n<p>软固定</p>\n<p>鬼步bug？？？</p>\n<p>hack rom 需要游戏设计idea，需要可玩性~</p>\n","feature":false,"text":"1Hack rom 教程https://cloud.tencent.com/developer/article/1176843kof97http://www.winkawaks.org/roms/neogeo/index.htm F5存档F7读档 neogeo:debug dip...","link":"","photos":[],"count_time":{"symbolsCount":"8.1k","symbolsTime":"7 mins."},"categories":[{"name":"逆向","slug":"逆向","count":5,"path":"api/categories/逆向.json"}],"tags":[{"name":"游戏逆向","slug":"游戏逆向","count":1,"path":"api/tags/游戏逆向.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1\"><span class=\"toc-text\">1</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#mame\"><span class=\"toc-text\">mame</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#2-M68000%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80\"><span class=\"toc-text\">2 M68000汇编基础</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#mame%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7\"><span class=\"toc-text\">mame调试技巧</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#3-kof97%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84\"><span class=\"toc-text\">3.kof97内存地址映射</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E9%AA%8C1\"><span class=\"toc-text\">实验1</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E9%AA%8C2\"><span class=\"toc-text\">实验2</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Bankswitch\"><span class=\"toc-text\">Bankswitch</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#4-%E4%B8%BB%E5%BE%AA%E7%8E%AF\"><span class=\"toc-text\">4. 主循环</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ROM%E6%96%87%E4%BB%B6%E5%A4%B4%E6%A0%BC%E5%BC%8F\"><span class=\"toc-text\">ROM文件头格式</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#RAM%E5%B8%83%E5%B1%80\"><span class=\"toc-text\">RAM布局</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#5-%E5%9B%BE%E5%83%8F%E6%98%BE%E7%A4%BA%EF%BC%88%E4%B8%8A%EF%BC%89\"><span class=\"toc-text\">5.图像显示（上）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#fix-layer%EF%BC%9A-%E5%9B%BE%E5%B1%82%E7%BD%AE%E9%A1%B6-fixed-position\"><span class=\"toc-text\">fix layer： 图层置顶 fixed position</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Sprites-%E4%B8%80%E6%9D%A1\"><span class=\"toc-text\">Sprites 一条</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#6-%E5%9B%BE%E5%83%8F%E6%98%BE%E7%A4%BA%EF%BC%88%E4%B8%8B%EF%BC%89\"><span class=\"toc-text\">6.图像显示（下）</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#7-%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">7.动态内存管理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BB%8F%E5%85%B8%E5%AE%9E%E9%AA%8C\"><span class=\"toc-text\">经典实验</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#8-ACT%E5%B0%81%E8%A3%85\"><span class=\"toc-text\">8.ACT封装</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#9-%E6%8C%87%E4%BB%A4%E8%BE%93%E5%85%A5%E7%B3%BB%E7%BB%9F-%E5%87%BA%E6%8B%9B%E8%A1%A8\"><span class=\"toc-text\">9.指令输入系统+出招表</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#10-%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B\"><span class=\"toc-text\">10.碰撞检测</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#11-%E7%A2%B0%E6%92%9E%E5%A4%84%E7%90%86%E5%92%8C%E8%BF%9E%E6%8B%9B\"><span class=\"toc-text\">11.碰撞处理和连招</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%9E%E7%BB%AD%E6%8A%80\"><span class=\"toc-text\">连续技</span></a></li></ol></li></ol>","author":{"name":"CodingSeed","slug":"blog-author","avatar":"http://cache.itzy8.top/img/a.jpg","link":"/","description":"","socials":{"github":"https://github.com/codingseed","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"SpringBoot2[atguigu-sb2-bxl]","uid":"4f5f8b1adeea7120197c416f19615115","slug":"SpringBoot2","date":"2021-06-16T14:11:41.000Z","updated":"2022-08-22T07:59:52.697Z","comments":true,"path":"api/articles/SpringBoot2.json","keywords":null,"cover":"http://p4.qhimg.com/bdm/480_296_0/t01c2e33bb9aaef0a72.jpg","text":"[TOC] idea：ctrl+alt+v 快速引进变量，自动补全函数返回值 &#x3D;&#x3D;win+shift+s&#x3D;&#x3D;：windows截屏工具快捷键！！！ 第一季：SpringBoot2核心技术-基础入门01、背景Faas：函数式服务 Serverl...","link":"","photos":[],"count_time":{"symbolsCount":"177k","symbolsTime":"2:41"},"categories":[{"name":"SpringBoot2","slug":"SpringBoot2","count":1,"path":"api/categories/SpringBoot2.json"}],"tags":[{"name":"SpringBoot2","slug":"SpringBoot2","count":1,"path":"api/tags/SpringBoot2.json"}],"author":{"name":"CodingSeed","slug":"blog-author","avatar":"http://cache.itzy8.top/img/a.jpg","link":"/","description":"","socials":{"github":"https://github.com/codingseed","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"《恶意代码分析实战》实验","uid":"ff3b385e81d2e459aa67c54453b93307","slug":"《恶意代码分析实战》实验","date":"2020-11-26T16:25:37.000Z","updated":"2022-08-22T07:46:57.462Z","comments":true,"path":"api/articles/《恶意代码分析实战》实验.json","keywords":null,"cover":"http://browser9.qhimg.com/bdm/480_296_0/t0128e904ff207c846b.jpg","text":"1https://down.52pojie.cn/Tools/ 1-1： https://www.virustotal.com/gui/ https://www.virscan.org/ pe.jpg PEiD PEtools 1-2: 脱壳机FUPX—改源文件 sysinter...","link":"","photos":[],"count_time":{"symbolsCount":"21k","symbolsTime":"19 mins."},"categories":[{"name":"逆向","slug":"逆向","count":5,"path":"api/categories/逆向.json"}],"tags":[{"name":"逆向","slug":"逆向","count":4,"path":"api/tags/逆向.json"},{"name":"反汇编","slug":"反汇编","count":1,"path":"api/tags/反汇编.json"}],"author":{"name":"CodingSeed","slug":"blog-author","avatar":"http://cache.itzy8.top/img/a.jpg","link":"/","description":"","socials":{"github":"https://github.com/codingseed","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}